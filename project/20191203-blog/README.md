# ブログ再構築

没: 2019-12-03

ブログを DocBook + オレオレ拡張から AsciiDoc + 拡張へ移行しようとしたが諦めた残骸。
AsciiDoc の表現力の低さに不満があるので破棄。

## 概要

nanoc で構築された普通のサイト。
`lib/asciidoctor.rb` に AsciiDoc の拡張を含むが、ここを実装していて不満が拭えなかったため諦めた。

## 死因

### 文法の欠陥

AsciiDoc は複数のブロックを関連付けることが難しい。
たとえ親子関係や兄弟関係を持っていたりしても、ブロックの種類ごとに別々の新種ブロックを定義してやる必要がある。

要するに構造化されたデータの記述に向いていない。
これはメタデータを突っ込もうと考えたとき致命的。

### asciidoctor の API が気に入らない

たとえば figure と figcaption を実装するためには、それぞれのための拡張を用意せねばならず、ひとつの新たな構造を導入するのにひとつのプロセッサで済まない。

あるいは、インラインマクロについても、 `inlinemacro:target[body]` について target を省略可にすることができなかったり(省略必須か省略不可かしか選べない)、それも絡んで target 部に属性列を指定して body 部に AsciiDoc テキストを入れるなども面倒だったりした。

## これから

XML 並の表現力と一貫した構文がないと生きられない体質であることがわかった。
オレオレ文法を作るか、それが無理だったら諦めて XML に戻る。
